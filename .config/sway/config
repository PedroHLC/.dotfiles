# Laptop keyboard
input "2:14:ETPS/2_Elantech_Touchpad" {
	tap enabled
	natural_scroll enabled
}
input "1:1:AT_Translated_Set_2_keyboard" {
	xkb_layout br
}

# Default displays
output "eDP-1" pos 930 1080
output "DP-1" pos 0 0
output "HDMI-A-1" pos 1920 0

# start locked
set $lock /home/pedrohlc/.local/bin/my-wscreensaver
exec $lock

# lock after 30 min idle
#exec swayidle \
#	timeout 30 '$scrsv' \
#	before-sleep '$lock'

# Mouse follows and follows mouse
focus_follows_mouse yes
mouse_warping container

# Minimum Settings
set $mod Mod4
set $editor subl

# Display keys
font pango:monospace 8
font pango:Fira Sans Mono 8
floating_modifier $mod

# Pretty much i3 keybinds with small adjusted
bindsym $mod+Return exec alacritty
bindsym $mod+Shift+q kill
bindsym $mod+d exec wofi --gtk-dark --show run
bindsym $mod+Shift+d exec wofi --gtk-dark --show drun
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right
bindsym $mod+u split h
bindsym $mod+i split v
bindsym $mod+f fullscreen toggle
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+t sticky toggle

mode "resize" {
    bindsym h resize shrink width 10 px or 10 ppt
    bindsym j resize grow height 10 px or 10 ppt
    bindsym k resize shrink height 10 px or 10 ppt
    bindsym l resize grow width 10 px or 10 ppt
    bindsym Left resize shrink width 10 px or 10 ppt
    bindsym Down resize grow height 10 px or 10 ppt
    bindsym Up resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt
    
	bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# Lower bar
bar {
	swaybar_command waybar
}

# Laptop keybings
bindsym XF86AudioLowerVolume exec /usr/bin/pactl set-sink-volume 0 -5%
bindsym XF86AudioRaiseVolume exec /usr/bin/pactl set-sink-volume 0 +5%
bindsym XF86AudioMute exec /usr/bin/pactl set-sink-mute 0 toggle
bindsym XF86MonBrightnessUp exec intelbacklight -inc 10
bindsym $mod+XF86MonBrightnessUp output * dpms on
bindsym XF86MonBrightnessDown exec intelbacklight -dec 10
bindsym $mod+XF86MonBrightnessDown output * dpms off
bindsym XF86WLAN exec $TERMINAL nmtui; mode "default"
bindsym Print exec grim -t png - | tee /tmp/screenshot.png | wl-copy
bindsym $mod+Print exec grim -t png -g "$(slurp)" - | tee /tmp/screenshot.png | wl-copy
bindsym Shift+Print exec grim -t png -o DP-1 - | tee /tmp/screenshot.png | wl-copy
bindsym Ctrl+Print exec grim -t png -o eDP-1 - | tee /tmp/screenshot.png | wl-copy
bindsym Alt+Print exec grim -t png -o HDMI-A-1 - | tee /tmp/screenshot.png | wl-copy

# window settings
default_border pixel 1
hide_edge_borders both

# Per app window settings
for_window [app_id="firefox" title="moz-extension:.*"] floating enable
for_window [app_id="firefox" title="Password Required"] floating enable
for_window [app_id="firefox" title="Picture-in-Picture"] floating enable; sticky enable
for_window [app_id="firefox" title="Firefox - Sharing Indicator"] floating enable; sticky enable

for_window [title="Global-WScreenSaver"] fullscreen enable global; sticky enable
for_window [title="eDP-WScreenSaver"] move container to output "eDP-1"; fullscreen enable; sticky enable
for_window [title="HDMI-WScreenSaver"] move container to output "HDMI-A-1"; fullscreen enable; sticky enable
for_window [title="VGA-WScreenSaver"] move container to output "DP-1"; fullscreen enable; sticky enable

# Proper options for poweroff
set $mode_power [L]ogoff | [S]hutdown | [R]eboot | [l]ock | [s]uspend
mode "$mode_power" {
    bindsym Shift+l exec swaymsg exit
    bindsym Shift+s exec systemctl poweroff
    bindsym Shift+r exec systemctl reboot
    bindsym s exec systemctl suspend & $lock ; mode default
    bindsym l exec $lock ; mode default
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+Shift+e mode "$mode_power"

# A fast launcher
set $mode_favs [f]irefox | [F]ileMgr | [v]olume | q[b]ittorrent | [T]elegram | [e]ditor | [S]potify
mode "$mode_favs" {
    bindsym f exec firefox; mode "default"
    bindsym d exec discord; mode "default"
    bindsym Shift+f exec pcmanfm-qt; mode "default"
    bindsym v exec pavucontrol; mode "default"
    bindsym b exec env QT_AUTO_SCREEN_SCALE_FACTOR=0 qbittorrent; mode "default"
    bindsym e exec $editor; mode "default"
    bindsym shift+o exec nowl obs; mode "default"
    bindsym shift+c exec nowl google-chrome-stable; mode "default"
    bindsym Shift+s exec ((pidof spotify) || spotify); mode "default"
    bindsym Shift+t exec telegram-desktop; mode "default"
    bindsym Ctrl+Escape exec $editor ~/.config/sway/config; mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+Tab mode "$mode_favs"

# Notifications daemon
exec mako --output eDP-1

# Screen sharing
exec xdg-desktop-portal-wlr -p BGRx

# Wallpaper
output '*' background /home/pedrohlc/.wallpaper.jpg fill
output 'HDMI-A-1' background /home/pedrohlc/.wallpaper.HDMI-A-1.jpg fill
output 'DP-1' background /home/pedrohlc/.wallpaper.DP-1.jpg fill
output 'eDP-1' background /home/pedrohlc/.wallpaper.eDP-1.jpg fill

# GNOME THeme
set $gnome-schema org.gnome.desktop.interface
exec_always {
    gsettings set $gnome-schema gtk-theme 'Breeze-Dark'
    gsettings set $gnome-schema icon-theme 'Vimix-Doder-dark'
    gsettings set $gnome-schema cursor-theme 'Breeze_Snow'
}

# Some transparencies
for_window [class="Spotify"] opacity 0.9
